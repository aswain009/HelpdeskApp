@page "{id:int}"
@model Helpdesk.Api.Pages.Tickets.DetailsModel

<h1>Ticket @Model.Ticket.Id</h1>

<dl class="row">
    <dt class="col-sm-3">Title</dt>
    <dd class="col-sm-9">@Model.Ticket.Title</dd>

    <dt class="col-sm-3">Description</dt>
    <dd class="col-sm-9">@Model.Ticket.Description</dd>

    <dt class="col-sm-3">Status</dt>
    <dd class="col-sm-9">@Model.Ticket.Status</dd>

    <dt class="col-sm-3">Assigned</dt>
    <dd class="col-sm-9">@Model.Ticket.AssignedUser?.Name</dd>

    <dt class="col-sm-3">Created</dt>
    <dd class="col-sm-9">@Model.Ticket.CreatedAt.ToLocalTime()</dd>

    <dt class="col-sm-3">Updated</dt>
    <dd class="col-sm-9">@Model.Ticket.UpdatedAt.ToLocalTime()</dd>
</dl>

<form method="post" asp-page-handler="Assign" class="row g-2 mb-3">
    <div class="col-auto">
        <select asp-for="AssignUserId" class="form-select">
            <option value="">Unassigned</option>
            @foreach (var user in Model.Users)
            {
                <option value="@user.Id" selected="@(Model.Ticket.AssignedUserId==user.Id)">@user.Name</option>
            }
        </select>
    </div>
    <div class="col-auto">
        <button class="btn btn-outline-primary" type="submit">Assign</button>
        <a class="btn btn-secondary" asp-page="Index">Back</a>
        <a class="btn btn-primary" asp-page="Edit" asp-route-id="@Model.Ticket.Id">Edit</a>
    </div>
</form>
